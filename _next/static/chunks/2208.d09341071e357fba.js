"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2208],{2208:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var r=n(29),o=n(6835),i=n(7794),s=n.n(i),a=n(7294),l=n(5152),c=n.n(l),u=n(7650);var d=n(1248),h=n(4512),f=n(1163),p=n(6245),g=n(4376),v=n(5893);var b=function(e){var t=e.message,n=(0,d.I0)();return(0,v.jsxs)("div",{className:"fixed z-[60] h-10 right-0 left-0 top-0 text-white bg-primary-light flex items-center justify-center w-full\n         ".concat(t&&"fadeInDownModal"," ").concat(!t&&"fadeInUpModal"),children:[(0,v.jsx)("p",{className:"text-xs leading-4 !leading-leadingBody capitalize f-f-s text-white",children:t&&t}),(0,v.jsx)("svg",{role:"button","aria-label":"close announcement modal",onClick:function(){return n((0,h.zd)(!1))},className:"cursor-pointer absolute right-4",width:"14",height:"14",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M16 2L2 16M2 2L16 16",stroke:"currentColor",strokeWidth:"3"})})]})},w=c()((function(){return Promise.all([n.e(9768),n.e(1193),n.e(7837)]).then(n.bind(n,7837))}),{ssr:!1,loadableGenerated:{webpack:function(){return[7837]}}}),m=c()((function(){return Promise.all([n.e(1193),n.e(1577)]).then(n.bind(n,1577))}),{loadableGenerated:{webpack:function(){return[1577]}}}),y=c()((function(){return n.e(8785).then(n.bind(n,8785))}),{loadableGenerated:{webpack:function(){return[8785]}}}),k=c()((function(){return Promise.all([n.e(5675),n.e(1193),n.e(7886),n.e(8510)]).then(n.bind(n,8510))}),{loadableGenerated:{webpack:function(){return[8510]}}});function x(e){var t=e.children,n=(0,f.useRouter)(),i=n.asPath,l=n.push,c=(0,d.I0)(),x=(0,g.eG)(),V=(0,o.Z)(x,1)[0],C=(0,g.Es)(),S=(0,o.Z)(C,1)[0],I=(0,d.v9)((function(e){return e.dataSlice.profileStats})),j=(0,d.v9)((function(e){return e.dataSlice.user})),E=(0,d.v9)((function(e){return e.dataSlice.token})),M=(0,d.v9)((function(e){return e.dataSlice.appDefaults})),N=(0,d.v9)((function(e){return e.dataSlice.profileToggle})),O=(0,d.v9)((function(e){return e.dataSlice.courses})),L=(0,d.v9)((function(e){return e.dataSlice.announcementMessage})),_=(0,a.useState)(0),R=_[0],B=_[1],F=(0,a.useState)(!1),P=F[0],D=F[1],z=(0,a.useRef)(),A=function(e,t){var n=(0,u.YD)({threshold:t||.459}),r=n.ref,o=n.inView,i=e.color1,s=e.color2;return(0,a.useEffect)((function(){var e=document.querySelector("#devTool"),t=document.querySelector("#devToolPopup");o?(e&&(e.style.backgroundColor=i),t&&(t.style.backgroundColor=i)):(e&&(e.style.backgroundColor=s),t&&(t.style.backgroundColor=s))}),[o]),{ref:r}}({color1:"#E9E9EA",color2:"#FFF"}).ref,G=function(){var e=window.pageYOffset;B(e)};(0,a.useEffect)((function(){(function(){Q.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){return window.addEventListener("scroll",G,{passive:!0}),function(){window.removeEventListener("scroll",G)}}),[]);var Z=function(e){l("/course/".concat(e.id))};function Q(){return(Q=(0,r.Z)(s().mark((function e(){var t,n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!0),t=localStorage.getItem("auth"),n=localStorage.getItem("token"),!t){e.next=51;break}if(!n){e.next=44;break}return r=null,e.prev=6,e.next=9,(0,p.Z)(n);case 9:if(r=e.sent,!(Date.now()>=1e3*r.exp)){e.next=20;break}c((0,h.QV)(!1)),c((0,h.o4)(null)),"/login",D(!1),l({pathname:"/login",query:{error:"Session Exipred! Please login again."}}),localStorage.removeItem("auth"),localStorage.removeItem("token"),e.next=31;break;case 20:if(!O||0!=O.all.length){e.next=26;break}return e.next=23,S().unwrap().catch((function(e){console.log("err: failed to fetch courses",e)}));case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=O;case 27:o=e.t0,c((0,h.sL)(o)),1==o.all.length?(c((0,h.KB)(!0)),D(!1),i.includes("/course-overview")&&Z(o.all[0])):D(!1),r&&!E&&c((0,h.o4)(n));case 31:e.next=42;break;case 33:e.prev=33,e.t1=e.catch(6),D(!1),console.log("error",e.t1),c((0,h.QV)(!1)),c((0,h.o4)(null)),!i.includes("reset-password")&&l("/login"),localStorage.removeItem("auth"),localStorage.removeItem("token");case 42:e.next=49;break;case 44:D(!1),c((0,h.QV)(!1)),l("/login"),localStorage.removeItem("auth"),localStorage.removeItem("token");case 49:e.next=54;break;case 51:D(!1),c((0,h.QV)(!1)),!i.includes("reset-password")&&l("/login");case 54:case"end":return e.stop()}}),e,null,[[6,33]])})))).apply(this,arguments)}return(0,a.useEffect)((function(){j&&!I&&V().unwrap().then((function(e){c((0,h.Yn)(e))})).catch((function(e){return console.error(e)}))}),[j]),(0,v.jsxs)("div",{ref:z,className:"min-h-screen relative flex flex-col ".concat((null===M||void 0===M?void 0:M.footer)&&"justify-between"," "),children:[(0,v.jsx)(m,{profile:N}),j&&O.all&&!P?(0,v.jsxs)(a.Fragment,{children:[L?(0,v.jsx)(b,{message:L}):null,(0,v.jsx)(w,{loading:!j.id}),t,(0,v.jsx)("div",{className:"bottom-[2rem] pointer-events-none -mb-7 md:-mb-8 pr-4 sticky z-50 items-center justify-end w-full right-4 ".concat(N?"hidden":R>398?"flex":"hidden"),children:(0,v.jsx)("div",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},className:" pointer-events-auto drop-shadow-md flex items-center justify-center h-12 w-12 md:h-16 md:w-16 cursor-pointer bg-darkBg rounded-full ease-in transition-all duration-300 ".concat(R>400?"fadeIn":"fadeOut"),children:(0,v.jsx)("svg",{width:"18",height:"24",viewBox:"0 0 18 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M8.1655 1.02279L0.724409 6.85629C0.156872 7.33891 0.102684 8.11279 0.539608 8.62079C0.976532 9.12875 1.85961 9.21245 2.39318 8.79645L7.68678 4.64271L7.68678 24.5C7.68678 25.1903 8.27467 25.75 8.99987 25.75C9.72511 25.75 10.313 25.1903 10.313 24.5L10.313 4.64271L15.6066 8.79645C16.1401 9.21245 17.0108 9.11883 17.4601 8.62079C17.9235 8.1072 17.809 7.27216 17.2754 6.85629L9.83428 1.02279C9.27335 0.643042 8.70792 0.675458 8.1655 1.02279Z",fill:"#FFF"})})})}),null!==M&&void 0!==M&&M.footer&&!N?(0,v.jsx)(k,{fref:A}):null]}):(0,v.jsx)("div",{className:"container mx-auto px-4 md:px-0",children:(0,v.jsx)(y,{})})]})}},7650:function(e,t,n){n.d(t,{YD:function(){return p},df:function(){return f}});var r=n(7294);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const i=new Map,s=new WeakMap;let a,l=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(s.has(n)||(l+=1,s.set(n,l.toString())),s.get(n)):"0"):e[t]}`;var n})).toString()}function u(e,t,n={},r=a){if("undefined"===typeof window.IntersectionObserver&&void 0!==r){const o=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:o,observer:s,elements:l}=function(e){let t=c(e),n=i.get(t);if(!n){const r=new Map;let o;const s=new IntersectionObserver((t=>{t.forEach((t=>{var n;const i=t.isIntersecting&&o.some((e=>t.intersectionRatio>=e));e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=i),null==(n=r.get(t.target))||n.forEach((e=>{e(i,t)}))}))}),e);o=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:r},i.set(t,n)}return n}(n);let u=l.get(e)||[];return l.has(e)||l.set(e,u),u.push(t),s.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(l.delete(e),s.unobserve(e)),0===l.size&&(s.disconnect(),i.delete(o))}}const d=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function h(e){return"function"!==typeof e.children}class f extends r.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{this.node&&(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),h(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold&&e.skip===this.props.skip&&e.trackVisibility===this.props.trackVisibility&&e.delay===this.props.delay||(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;const{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:o,fallbackInView:i}=this.props;this._unobserveCb=u(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:o},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!h(this.props)){const{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}const e=this.props,{children:t,as:n}=e,i=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,d);return r.createElement(n||"div",o({ref:this.handleNode},i),t)}}function p({threshold:e,delay:t,trackVisibility:n,rootMargin:o,root:i,triggerOnce:s,skip:a,initialInView:l,fallbackInView:c,onChange:d}={}){var h;const[f,p]=r.useState(null),g=r.useRef(),[v,b]=r.useState({inView:!!l,entry:void 0});g.current=d,r.useEffect((()=>{if(a||!f)return;let r;return r=u(f,((e,t)=>{b({inView:e,entry:t}),g.current&&g.current(e,t),t.isIntersecting&&s&&r&&(r(),r=void 0)}),{root:i,rootMargin:o,threshold:e,trackVisibility:n,delay:t},c),()=>{r&&r()}}),[Array.isArray(e)?e.toString():e,f,i,o,s,a,n,c,t]);const w=null==(h=v.entry)?void 0:h.target,m=r.useRef();f||!w||s||a||m.current===w||(m.current=w,b({inView:!!l,entry:void 0}));const y=[p,v.inView,v.entry];return y.ref=y[0],y.inView=y[1],y.entry=y[2],y}}}]);