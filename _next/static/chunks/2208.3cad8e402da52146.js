"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2208],{2208:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(29),o=n(6835),i=n(7794),s=n.n(i),l=n(7294),a=n(5152),c=n.n(a),u=n(7650),d=n(1248),h=n(4512),f=n(1163),p=n(6245),g=n(4376),v=n(5893),b=function(e){var t=e.message,n=(0,d.I0)();return(0,v.jsxs)("div",{className:"fixed z-[60] h-10 right-0 left-0 top-0 text-white bg-primary-light flex items-center justify-center w-full\n         ".concat(t&&"fadeInDownModal"," ").concat(!t&&"fadeInUpModal"),children:[(0,v.jsx)("p",{className:"text-xs leading-4 !leading-leadingBody capitalize f-f-s text-white",children:t&&t}),(0,v.jsx)("svg",{role:"button","aria-label":"close announcement modal",onClick:function(){return n((0,h.zd)(!1))},className:"cursor-pointer absolute right-4",width:"14",height:"14",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M16 2L2 16M2 2L16 16",stroke:"currentColor",strokeWidth:"3"})})]})},m=c()(function(){return Promise.all([n.e(9768),n.e(1193),n.e(7837)]).then(n.bind(n,7837))},{ssr:!1,loadableGenerated:{webpack:function(){return[7837]}}}),w=c()(function(){return Promise.all([n.e(1193),n.e(1577)]).then(n.bind(n,1577))},{loadableGenerated:{webpack:function(){return[1577]}}}),x=c()(function(){return n.e(8785).then(n.bind(n,8785))},{loadableGenerated:{webpack:function(){return[8785]}}}),k=c()(function(){return Promise.all([n.e(5675),n.e(1193),n.e(7886),n.e(8510)]).then(n.bind(n,8510))},{loadableGenerated:{webpack:function(){return[8510]}}});function y(e){var t,n,i,a,c,y,C,S=e.children,j=(0,f.useRouter)(),I=j.asPath,V=j.push,E=(0,d.I0)(),N=(0,g.eG)(),O=(0,o.Z)(N,1)[0],M=(0,g.Es)(),L=(0,o.Z)(M,1)[0],_=(0,d.v9)(function(e){return e.dataSlice.profileStats}),R=(0,d.v9)(function(e){return e.dataSlice.user}),B=(0,d.v9)(function(e){return e.dataSlice.token}),F=(0,d.v9)(function(e){return e.dataSlice.appDefaults}),P=(0,d.v9)(function(e){return e.dataSlice.profileToggle}),D=(0,d.v9)(function(e){return e.dataSlice.courses}),z=(0,d.v9)(function(e){return e.dataSlice.announcementMessage}),A=(0,l.useState)(0),G=A[0],Z=A[1],Q=(0,l.useState)(!1),T=Q[0],Y=Q[1],q=(0,l.useRef)(),U=(t={color1:"#E9E9EA",color2:"#FFF"},a=(i=(0,u.YD)({threshold:n||.459})).ref,c=i.inView,y=t.color1,C=t.color2,(0,l.useEffect)(function(){var e=document.querySelector("#devTool"),t=document.querySelector("#devToolPopup");c?(e&&(e.style.backgroundColor=y),t&&(t.style.backgroundColor=y)):(e&&(e.style.backgroundColor=C),t&&(t.style.backgroundColor=C))},[c]),{ref:a}).ref,W=function(){Z(window.pageYOffset)};(0,l.useEffect)(function(){(function(){K.apply(this,arguments)})()},[]),(0,l.useEffect)(function(){return window.addEventListener("scroll",W,{passive:!0}),function(){window.removeEventListener("scroll",W)}},[]);var $=function(e){V("/course/".concat(e.id))};function K(){return(K=(0,r.Z)(s().mark(function e(){var t,n,r,o,i;return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Y(!0),t=localStorage.getItem("auth"),n=localStorage.getItem("token"),!t){e.next=51;break}if(!n){e.next=44;break}return r=null,e.prev=6,e.next=9,(0,p.Z)(n);case 9:if(r=e.sent,!(Date.now()>=1e3*r.exp)){e.next=20;break}E((0,h.QV)(!1)),E((0,h.o4)(null)),o="/login",Y(!1),V({pathname:o,query:{error:"Session Exipred! Please login again."}}),localStorage.removeItem("auth"),localStorage.removeItem("token"),e.next=31;break;case 20:if(!(D&&0==D.all.length)){e.next=26;break}return e.next=23,L().unwrap().catch(function(e){console.log("err: failed to fetch courses",e)});case 23:e.t0=e.sent,e.next=27;break;case 26:e.t0=D;case 27:i=e.t0,E((0,h.sL)(i)),1==i.all.length?(E((0,h.KB)(!0)),Y(!1),I.includes("/course-overview")&&$(i.all[0])):Y(!1),r&&!B&&E((0,h.o4)(n));case 31:e.next=42;break;case 33:e.prev=33,e.t1=e.catch(6),Y(!1),console.log("error",e.t1),E((0,h.QV)(!1)),E((0,h.o4)(null)),I.includes("reset-password")||V("/login"),localStorage.removeItem("auth"),localStorage.removeItem("token");case 42:e.next=49;break;case 44:Y(!1),E((0,h.QV)(!1)),V("/login"),localStorage.removeItem("auth"),localStorage.removeItem("token");case 49:e.next=54;break;case 51:Y(!1),E((0,h.QV)(!1)),I.includes("reset-password")||V("/login");case 54:case"end":return e.stop()}},e,null,[[6,33]])}))).apply(this,arguments)}var H=function(){O().unwrap().then(function(e){E((0,h.Yn)(e))}).catch(function(e){return console.error(e)})};return(0,l.useEffect)(function(){R&&!_&&H()},[R]),(0,v.jsxs)("div",{ref:q,className:"min-h-screen relative flex flex-col ".concat((null==F?void 0:F.footer)&&"justify-between"," "),children:[(0,v.jsx)(w,{profile:P}),R&&D.all&&!T?(0,v.jsxs)(l.Fragment,{children:[z?(0,v.jsx)(b,{message:z}):null,(0,v.jsx)(m,{loading:!R.id}),S,(0,v.jsx)("div",{className:"bottom-[2rem] pointer-events-none -mb-7 md:-mb-8 pr-4 sticky z-50 items-center justify-end w-full right-4 ".concat(P?"hidden":G>398?"flex":"hidden"),children:(0,v.jsx)("div",{onClick:function(){window.scrollTo({top:0,behavior:"smooth"})},className:" pointer-events-auto drop-shadow-md flex items-center justify-center h-12 w-12 md:h-16 md:w-16 cursor-pointer bg-darkBg rounded-full ease-in transition-all duration-300 ".concat(G>400?"fadeIn":"fadeOut"),children:(0,v.jsx)("svg",{width:"18",height:"24",viewBox:"0 0 18 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M8.1655 1.02279L0.724409 6.85629C0.156872 7.33891 0.102684 8.11279 0.539608 8.62079C0.976532 9.12875 1.85961 9.21245 2.39318 8.79645L7.68678 4.64271L7.68678 24.5C7.68678 25.1903 8.27467 25.75 8.99987 25.75C9.72511 25.75 10.313 25.1903 10.313 24.5L10.313 4.64271L15.6066 8.79645C16.1401 9.21245 17.0108 9.11883 17.4601 8.62079C17.9235 8.1072 17.809 7.27216 17.2754 6.85629L9.83428 1.02279C9.27335 0.643042 8.70792 0.675458 8.1655 1.02279Z",fill:"#FFF"})})})}),null!=F&&F.footer&&!P?(0,v.jsx)(k,{fref:U}):null]}):(0,v.jsx)("div",{className:"container mx-auto px-4 md:px-0",children:(0,v.jsx)(x,{})})]})}},7650:function(e,t,n){n.d(t,{YD:function(){return f},df:function(){return h}});var r=n(7294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let i=new Map,s=new WeakMap,l=0,a;function c(e,t,n={},r=a){if(void 0===window.IntersectionObserver&&void 0!==r){let o=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}let{id:c,observer:u,elements:d}=function(e){var t;let n=Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{var n;return`${t}_${"root"===t?(n=e.root)?(s.has(n)||(l+=1,s.set(n,l.toString())),s.get(n)):"0":e[t]}`}).toString(),r=i.get(n);if(!r){let o=new Map,a,c=new IntersectionObserver(t=>{t.forEach(t=>{var n;let r=t.isIntersecting&&a.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=r),null==(n=o.get(t.target))||n.forEach(e=>{e(r,t)})})},e);a=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:c,elements:o},i.set(n,r)}return r}(n),h=d.get(e)||[];return d.has(e)||d.set(e,h),h.push(t),u.observe(e),function(){h.splice(h.indexOf(t),1),0===h.length&&(d.delete(e),u.unobserve(e)),0===d.size&&(u.disconnect(),i.delete(c))}}let u=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function d(e){return"function"!=typeof e.children}class h extends r.Component{constructor(e){super(e),this.node=null,this._unobserveCb=null,this.handleNode=e=>{!this.node||(this.unobserve(),e||this.props.triggerOnce||this.props.skip||this.setState({inView:!!this.props.initialInView,entry:void 0})),this.node=e||null,this.observeNode()},this.handleChange=(e,t)=>{e&&this.props.triggerOnce&&this.unobserve(),d(this.props)||this.setState({inView:e,entry:t}),this.props.onChange&&this.props.onChange(e,t)},this.state={inView:!!e.initialInView,entry:void 0}}componentDidUpdate(e){(e.rootMargin!==this.props.rootMargin||e.root!==this.props.root||e.threshold!==this.props.threshold||e.skip!==this.props.skip||e.trackVisibility!==this.props.trackVisibility||e.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())}componentWillUnmount(){this.unobserve(),this.node=null}observeNode(){if(!this.node||this.props.skip)return;let{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:o,fallbackInView:i}=this.props;this._unobserveCb=c(this.node,this.handleChange,{threshold:e,root:t,rootMargin:n,trackVisibility:r,delay:o},i)}unobserve(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)}render(){if(!d(this.props)){let{inView:e,entry:t}=this.state;return this.props.children({inView:e,entry:t,ref:this.handleNode})}let n=this.props,{children:i,as:s}=n,l=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(n,u);return r.createElement(s||"div",o({ref:this.handleNode},l),i)}}function f({threshold:e,delay:t,trackVisibility:n,rootMargin:o,root:i,triggerOnce:s,skip:l,initialInView:a,fallbackInView:u,onChange:d}={}){var h;let[f,p]=r.useState(null),g=r.useRef(),[v,b]=r.useState({inView:!!a,entry:void 0});g.current=d,r.useEffect(()=>{if(l||!f)return;let r;return r=c(f,(e,t)=>{b({inView:e,entry:t}),g.current&&g.current(e,t),t.isIntersecting&&s&&r&&(r(),r=void 0)},{root:i,rootMargin:o,threshold:e,trackVisibility:n,delay:t},u),()=>{r&&r()}},[Array.isArray(e)?e.toString():e,f,i,o,s,l,n,u,t]);let m=null==(h=v.entry)?void 0:h.target,w=r.useRef();f||!m||s||l||w.current===m||(w.current=m,b({inView:!!a,entry:void 0}));let x=[p,v.inView,v.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}}}]);