"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7088],{7088:function(e,t,n){n.r(t);var r=n(7294),a=n(7886),i=n(1163),l=n(39),s=n(1248),d=n(5893);t.default=function(e){var t,n,o,c=e.getLessonType,u=e.lesson,g=e.data,h=e.index,f=(0,i.useRouter)().query.id,x=(0,r.useState)(!1),m=x[0],p=x[1],v=(0,r.useState)(!1),b=v[0],k=v[1],y=(0,r.useState)(0),w=y[0],j=y[1],C=(0,r.useState)(!1),L=C[0],N=C[1],M=(0,r.useState)(!1),S=M[0],B=M[1],T=(0,s.v9)(function(e){return e.dataSlice.currentLessonTracking}),Z=(0,s.v9)(function(e){return e.dataSlice.currentModule}),E=(0,s.v9)(function(e){return e.dataSlice.moduleListing}),V=(0,s.v9)(function(e){return e.dataSlice.currentCourse}),z=(0,s.v9)(function(e){return e.dataSlice.prevLesson}),H=(0,l.Z)().translate;(0,r.useEffect)(function(){f&&(p(!1),k(!1),j(0))},[f]),(0,r.useEffect)(function(){if(T&&u){var e,t;if(u.id===(null==T?void 0:null===(e=T.trackingData)||void 0===e?void 0:e.id)&&(null==T?void 0:null===(t=T.trackingData)||void 0===t?void 0:t.type)===u.type)N(!0),j((0,a.zV)(T.progress)),T.progress>=100?p(!0):k(!0);else{N(!1);var n=u.userTrackings&&u.userTrackings.length?u.userTrackings[0]:null;if(n){if(n.lessonId&&u.id===n.lessonId&&"LESSON"===n.entityType)j((0,a.zV)(n.progress));else if(n.assessmentId&&u.id===n.assessmentId&&"ASSESSMENT"===n.entityType){var r=n.progress;j((0,a.zV)(r))}n.progress>=100?p(!0):k(!0)}else k(!1),j(0)}}},[T,u]);var F=function(e){return e===g.length-1&&w<100&&!L&&g.length-1!=0},_=function(){(0,a.$k)(u)&&!L&&(E?c(u,Z):c(u,V))};return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsxs)("div",{className:"relative flex items-center justify-center",children:[!m&&w<100&&b&&L&&S&&(0,d.jsx)("div",{onMouseEnter:function(){return B(!0)},onMouseLeave:function(){return B(!1)},className:"z-20 absolute -right-2 w-40 h-9 bg-primary-light dark:bg-primary-dark rounded-full text-[10px] leading-4 !leading-leadingBody text-white dark:text-black flex items-center",children:(0,d.jsx)("p",{className:"pl-4",children:H.currentlyLearning})}),S&&!L?(0,d.jsx)(r.Fragment,{children:null!=u&&null!==(t=u.images)&&void 0!==t&&t.primary?(0,d.jsx)("div",{className:"z-30 absolute right-6 ",children:(0,d.jsx)("div",{className:"flex items-center justify-center",children:(0,d.jsx)("div",{style:{backgroundImage:"url(".concat(u.images.primary,")")},className:"relative bg-cover tooltip right w-full ",children:(0,d.jsx)("div",{className:"absolute bottom-0 rounded-lg w-full h-full z-30 ".concat((0,a.$k)(u)?" background-mask":" bg-black opacity-75"," "),children:(0,a.$k)(u)?(0,d.jsx)("h1",{className:"absolute left-3 bottom-3 text-base font-bold !font-fontHeading leading-normal !leading-leadingHeading text-white",children:u.name}):(0,d.jsxs)("div",{className:" w-full h-full flex flex-col items-center justify-center space-y-4",children:[(0,d.jsx)("svg",{width:"18",height:"26",viewBox:"0 0 18 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M15.3848 11.5386V6.41036C15.3848 2.8757 12.5079 0 8.97445 0C5.43853 0 2.5641 2.8757 2.5641 6.41036V11.5386C1.15001 11.5386 0 12.6874 0 14.1028V23.0772C0 24.4914 1.15001 25.6414 2.56416 25.6414H15.3848C16.799 25.6414 17.949 24.4914 17.949 23.0772V14.1028C17.949 12.6874 16.799 11.5386 15.3848 11.5386ZM8.97445 20.5131C7.9129 20.5131 7.05135 19.6515 7.05135 18.59C7.05135 17.5284 7.9129 16.6669 8.97445 16.6669C10.036 16.6669 10.8976 17.5284 10.8976 18.59C10.8976 19.6515 10.036 20.5131 8.97445 20.5131ZM12.8207 11.5386H5.12825V6.41036C5.12825 4.28984 6.85393 2.56416 8.97445 2.56416C11.095 2.56416 12.8207 4.28984 12.8207 6.41036V11.5386Z",fill:"white"})}),(0,a.M2)(u)?(0,d.jsx)("h1",{className:"text-base font-bold !font-fontHeading leading-normal !leading-leadingHeading text-white px-6 text-center",children:(0,d.jsxs)("span",{children:[" ",H.roundFirst," ",(0,d.jsx)("span",{className:"font-bold !font-fontBody text-wmo-blue",children:z&&z.name})," ",H.finishToOpenLesson," "]})}):(0,d.jsx)("p",{className:"text-base font-bold !font-fontBody leading-normal !leading-leadingBody text-white text-center",children:"".concat(H.lessonComesUp," ").concat(u&&(null===(n=(0,a.FK)(u.unlock_at,H))||void 0===n?void 0:n.time)," "," "," ").concat(u&&(null===(o=(0,a.FK)(u.unlock_at,H))||void 0===o?void 0:o.type)," ").concat(H.available)})]})})})})}):(0,d.jsx)("div",{className:"z-30 absolute right-10 ",children:(0,d.jsxs)("div",{className:"flex items-center justify-center",children:[(0,d.jsx)("div",{className:"bg-primary-light dark:bg-primary-dark rounded-lg w-60 h-20 flex items-center justify-center px-3",children:(0,d.jsx)("h1",{className:"text-base font-bold !font-fontHeading leading-normal !leading-leadingHeading text-white dark:text-black",children:u.name})}),(0,d.jsx)("svg",{className:"-ml-3 text-primary-light dark:text-primary-dark",width:"25",height:"40",viewBox:"0 0 25 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M23.9706 18.2109C24.895 19.0086 24.895 20.4413 23.9706 21.2391L3.94429 38.5219C2.6483 39.6404 0.637596 38.7197 0.637596 37.0078L0.637596 2.44215C0.637596 0.730274 2.6483 -0.190416 3.94429 0.928032L23.9706 18.2109Z",fill:"currentColor"})})]})})}):null,(0,d.jsx)("div",{"data-for":"registerTip",onMouseEnter:function(){return B(!0)},onMouseLeave:function(){return B(!1)},onClick:function(){return _()},className:"".concat(F(h)?"bg-transparent border-primary-light dark:border-primary-dark border":"".concat(m||L&&!S?"bg-primary-light text-white dark:bg-primary-dark dark:text-black":"text-primary-light bg-white dark:bg-darkBg dark:text-primary-dark")," ").concat(L&&!S?"scale-150 ":"","  ").concat(!L&&" hover:bg-primary-light dark:hover:bg-primary-dark hover:text-white dark:hover:text-black"," \n            ").concat(!m&&w<100&&b&&L&&S?"w-4 h-4 ":"w-7 h-7 "," \n             ").concat(!L&&S?"scale-150":""," z-20 transition-all duration-300 ease-in-out text-[10px] leading-4 !leading-leadingBody font-bold !font-fontBody rounded-full flex flex-col items-center justify-center cursor-pointer"),children:(0,d.jsx)("div",{className:"flex items-center justify-center",children:F(h)?(0,d.jsx)(r.Fragment,{children:L?(0,d.jsx)("div",{className:"w-4 h-4 bg-white rounded-full"}):(0,d.jsx)("div",{className:"w-2.5 h-2.5 bg-primary-light dark:bg-primary-dark rounded-full"})}):(0,d.jsx)(r.Fragment,{children:m?(0,d.jsx)("svg",{width:10,height:9,viewBox:"0 0 10 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"M1.74042 3.51535C1.3692 3.10643 0.73677 3.07587 0.32785 3.44709C-0.0810698 3.8183 -0.111633 4.45073 0.259585 4.85965L1.74042 3.51535ZM3.55319 7L2.81278 7.67215L3.55319 8.48776L4.29361 7.67215L3.55319 7ZM9.74042 1.67215C10.1116 1.26323 10.0811 0.630803 9.67215 0.259585C9.26323 -0.111633 8.6308 -0.0810698 8.25958 0.32785L9.74042 1.67215ZM0.259585 4.85965L2.81278 7.67215L4.29361 6.32785L1.74042 3.51535L0.259585 4.85965ZM4.29361 7.67215L9.74042 1.67215L8.25958 0.32785L2.81278 6.32785L4.29361 7.67215Z",fill:"currentColor"})}):(0,d.jsx)("span",{children:L&&S&&w<100?null:h+1})})})})]},u.id),h!==g.length-1&&g.length-1!=0&&(0,d.jsx)("div",{className:"w-px h-[33px] bg-[#ADADAD] my-1"})]})}}}]);